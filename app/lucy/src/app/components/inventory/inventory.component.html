<!-- Header Section -->
<div class="container-fluid header-container">
  <div class="container">
    <mat-toolbar color="primary">
      <mat-toolbar-row>
        <span class="view-title">Lucy Database</span>
        <span class="spacer-toolbar"></span>
        <mat-icon [ngClass]="showMap ? 'active-btn' : 'inactive-btn'"  aria-hidden="false" aria-label="map view" (click)="switchShowMap()">map
        </mat-icon>
        <mat-icon [ngClass]="showList ? 'active-btn' : 'inactive-btn'" aria-hidden="false" aria-label="list view" (click)="switchShowList()">
          view_list</mat-icon>
      </mat-toolbar-row>
    </mat-toolbar>
  </div>
</div>
<!-- -------------------- -->
<div class="container">
  <div class="row">
    <div class="col-12">
      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Test
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-list>
            <mat-list-item>

              <mat-form-field>
                <input matInput placeholder="Number of observations" [(ngModel)]="numberOfObservationForTesting">
              </mat-form-field>
            </mat-list-item>

            <mat-list-item>
              <button mat-raised-button color="primary" (click)="generateObservationForTesting()">
                Generate {{numberOfObservationForTesting}} for testing</button>
            </mat-list-item>

            <mat-list-item>
              <button mat-raised-button color="accent" (click)="removeGeneratedObservations()">
                Remove Generated Observations
              </button>
            </mat-list-item>

          </mat-list>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
  <br/>
  <div *ngIf="showMap" class="row map-box" [ngClass]="showList ? 'map-box-partial' : 'map-box-full'">
    <div class="col-12">
      <app-map-preview [markers]="markers">
      </app-map-preview>
    </div>
  </div>
  <br/>
  <div *ngIf="showList" class="row">
    <table class="table table-hover">
      <thead class="thead, table-header">
        <tr>
          <th scope="col" (click)="sortByObservationId()">
            Observation ID
            <i *ngIf="sortingByObservationId && !sortAscending" class="material-icons">arrow_downward</i>
            <i *ngIf="sortingByObservationId && sortAscending" class="material-icons">arrow_upward</i>
          </th>
          <th scope="col" (click)="sortByLocation()">
            Location
            <i *ngIf="sortingByLocation && !sortAscending" class="material-icons">arrow_downward</i>
            <i *ngIf="sortingByLocation && sortAscending" class="material-icons">arrow_upward</i>
          </th>
          <th scope="col" (click)="sortBySpecies()">
            Species
            <i *ngIf="sortingBySpecies && !sortAscending" class="material-icons">arrow_downward</i>
            <i *ngIf="sortingBySpecies&& sortAscending" class="material-icons">arrow_upward</i>
          </th>
          <th scope="col" (click)="sortByDate()">
            Date
            <i *ngIf="sortingByDate && !sortAscending" class="material-icons">arrow_downward</i>
            <i *ngIf="sortingByDate && sortAscending" class="material-icons">arrow_upward</i>
          </th>
          <th scope="col" (click)="sortBySurveyor()">
           Observer
            <i *ngIf="sortingBySurveyor && !sortAscending" class="material-icons">arrow_downward</i>
            <i *ngIf="sortingBySurveyor && sortAscending" class="material-icons">arrow_upward</i>
          </th>
          <th scope="col">
            
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="table-row" *ngFor="let item of observations">
          <td scope="row" (click)="view(item)">{{item.observation_id}}</td>
          <td scope="row" (click)="view(item)">{{item.lat}}, {{item.long}}</td>
          <td scope="row" (click)="view(item)">{{item.species ? item.species.commonName : ''}}</td>
          <td scope="row" (click)="view(item)">{{item.date | momentPipe:'YYYY-MM-DD'}}</td>
          <td scope="row" (click)="view(item)">{{item.observerFirstName + " " + item.observerLastName}}</td>
          <td>
              <i class="material-icons" [matMenuTriggerFor]="menu">more_vert</i>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="view(item)">
                  View
                  <i class="material-icons action-icon">
                    visibility
                  </i>
                </button>
                <button *ngIf="isDataEditor" mat-menu-item (click)="edit(item)">
                  Edit
                  <i class="material-icons action-icon">
                    edit
                  </i>
                </button>
              </mat-menu>
            <!-- <div class="option-buttons">
              <button class="btn action-btn" type="button" (click)="view(item)">
                View
              </button>
              <button class="btn action-btn" type="button" (click)="edit(item)">
                Edit
              </button>
            </div> -->
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>